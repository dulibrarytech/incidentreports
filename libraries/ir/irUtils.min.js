irUtils=(function(e){var j,g,h,f,b,c,i,a,d,k;b=function(m){var l=null;var o=g();for(var n=0;n<o.length;n++){if(o[n].ReportID==m){l=o[n]}}if(l==null){console.log("Error: Can not retrieve reportID "+m+" from local cache")}return l};j=function(l){var m=JSON.stringify(l);sessionStorage.setItem("report_data",m)};g=function(){return JSON.parse(sessionStorage.getItem("report_data"))};h=function(){requestObj={type:"GET",url:service_url+_getReportData,dataType:"json",success:function(l){if(typeof l.status!="undefined"&&l.status=="success"){j(l.data);viewUtils.renderTemplate("dashboard",l.data)}else{console.log("Cannot retrieve report data");systemUtils.sendMessage("Server error: Please contact Systems support")}},error:function(l,n,m){console.log("Status: "+n+" Message: "+m);systemUtils.sendMessage("Server error: Please contact Systems support")}};systemUtils.doAjax(requestObj)};f=function(){requestObj={type:"GET",url:service_url+_getUserData,dataType:"json",success:function(l){if(typeof l.status!="undefined"&&l.status=="success"){viewUtils.renderTemplate("users",l.data)}else{console.log("Cannot retrieve report data");systemUtils.sendMessage("Server error: Please contact Systems support")}},error:function(l,n,m){console.log("Status: "+n+" Message: "+m);systemUtils.sendMessage("Server error: Please contact Systems support")}};systemUtils.doAjax(requestObj)};c=function(l){if(typeof l=="undefined"){l=g()}dashboard.buildTable(l)};i=function(){e("input#trackingNumber").val("");e("input#offenseType").val("");e("input#fromDate").val("");e("input#toDate").val("")};setCurrentReportID=function(l){sessionStorage.setItem("current_report_id",l)};getCurrentReportID=function(){return sessionStorage.getItem("current_report_id")};removeUserSessionData=function(){sessionStorage.removeItem("report_data");sessionStorage.removeItem("current_report_id")};addIRFormAutoSuggest=function(){var l={fields:"reportCompletedBy,title,department,extension,natureOfOffense,victimGender,victimRace,suspectGender,suspectRace,victimUniversityAffiliation,suspectUniversityAffiliation"};requestObj={type:"GET",url:service_url+_searchIRFormAutoSuggest,dataType:"json",data:l,success:function(m){if(m.status=="success"){initIRFormAutoSuggest(m.data)}},error:function(m,o,n){console.log("Cannot retrieve form auto suggest data. Status: "+o+" Message: "+n)}};systemUtils.doAjax(requestObj)};initIRFormAutoSuggest=function(n){var m="",l="";for(var o in n){m=o.substring(1,o.length);l=o.substring(0,1).toLowerCase();m="#"+l+m;e(m).autocomplete({source:n[o]})}};k=function(){return json.PARSE(sessionStorage("user_profile"))};return{getCachedReport:function(l){return b(l)},storeIncidentReports:function(l){j(l)},getIncidentReports:function(){return g()},loadDashboard:function(){h()},loadUsersView:function(){f()},refreshReportsTable:function(l){c(l)},clearReportsSearchForm:function(){i()},setCurrentReportID:function(l){setCurrentReportID(l)},getCurrentReportID:function(){return getCurrentReportID()},removeUserSessionData:function(){removeUserSessionData()},addIRFormAutoSuggest:function(){return addIRFormAutoSuggest()},getUserProfile:function(){return k()}}}(jQuery));